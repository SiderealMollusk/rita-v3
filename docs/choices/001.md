# ADR 001: Centralized Secrets Management via 1Password CLI

## Context
The project needs secrets for automation and deployment, but we want to avoid plaintext values in the repository and avoid ad-hoc local environment setup.

## Decision
Use 1Password CLI (`op`) as the single source of truth, with `op://` references in local `.env` and runtime resolution via `op run`.

## Implementation
1. Vault target: `wsrkpssm6j5cq63t5kni7cfkbm`.
2. Local `.env` stores only references, not secret values (for example `FOO=op://...`).
3. Scripts that need secrets execute through:
   - `op run --env-file=.env -- <command>`
4. Session auth is done in the operator shell (`op signin`), not persisted as session tokens in repo files.

## Implications
- Developers need `op` installed and authenticated in their shell.
- Secrets are resolved only at runtime.
- Secret values are not committed to source control.

## Operational Guidance
- Add new secrets in 1Password first, then add a corresponding `op://` reference in local `.env`.
- For automation/CI, use `OP_SERVICE_ACCOUNT_TOKEN` from the CI secret store.
- In Ansible, prefer `lookup('env', '...')` + `no_log: true` for secret-consuming tasks.
